# Tiny Cloud WebGL2 Shader 使用说明

代码来源: [Tiny Cloud](https://www.shadertoy.com/view/lsBfDz)

## 这玩意怎么在 HTML 里用啊

啊很简单，先在HTML中写
```html
<canvas id="c"></canvas>
```

然后再加载我的`main.js`
```html
<script type="module" src="./main.js"></script>
```
即可

需要注意的是，浏览器加载`main.js`时，会立刻执行其中的
```js
document.getElementById("c")
```

这一步必须在HTML中写入`canvas`后执行，否则会报错

## 哪些变量怎么改可以影响渲染效果


| 变量/位置                                         | 作用                    | 对效果/性能的影响                       | 典型改法                                                                 |
| --------------------------------------------- | --------------------- | ------------------------------- | -------------------------------------------------------------------- |
| `X_SCALE`, `Y_SCALE`                          | 真实渲染分辨率比，XY代表XY轴上的分辨率 | 较小 → 大幅提速（画面更模糊）；较大 → 更清晰更吃 GPU | 怎么改都行，降分辨率用的，全屏效果拉满分辨率卡的一笔                                           |
| `DPR_CAP`                                     | 限制高分屏 DPR             | 设为 `1.0` 避免 2x/3x 真渲染；提速明显      | 改低主要为了提速，改这个和改上面那个效果差不多，都是改渲染分辨率                                     |
| `iChannel0` 纹理 ( `main.js`: `makeNoiseTex()`) | **云雾的噪声/高度输入**        | 不同纹理 → 纹理细节/频率/方向完全不同           | 替换为图片/视频/程序纹理都行                                                      |
| `iTime`(`main.js`: `uniform1f`)               | 动画时间                  | 放快/放慢/暂停                        | 使用 `speed` 因子：`gl.uniform1f(loc.iTime, speed*(now-t0)*0.001)`；或传常量暂停 |
| `iMouse`（`main.js`）                           | 交互控制                  | 作为偏移/扰动/采样起点                    | 在 `frag.glsl` 里引用 `iMouse.xy` 改变采样坐标或参数                              |
| `frag.glsl` 中 `200.0`                         | 采样坐标的**尺度**           | 越大 → 纹理频率越高（更细）；越小 → 更大尺度云块     | 就这b云雾效果改高100倍都看不出效果，建议别改                                             |
| `sampleT` 循环次数（4 次）                           | 每步累积的样本数              | 更多 → 柔和/细腻但更慢；更少 → 粗糙但更快        | 设为 2/3/4 都行，反正没必要改                                                   |
| `--scale` (`index.html`)                      | 写在css里，画布大小           | CSS 缩放                          | 纯纯演示一下 CSS 缩放效果，我这里缩放为了 0.8 倍                                        |
